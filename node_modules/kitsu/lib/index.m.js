import t from"axios";import{camel as r,deserialise as e,error as n,kebab as i,query as a,serialise as s,snake as c}from"kitsu-core";var o=function(e){void 0===e&&(e={}),this.camel=!1===e.camelCaseTypes?function(t){return t}:r,this.resCase="none"===e.resourceCase?function(t){return t}:"snake"===e.resourceCase?c:i,this.plural=!1===e.pluralize?function(t){return t}:require("pluralize"),this.headers=Object.assign({},e.headers,{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"}),this.axios=t.create({baseURL:e.baseURL||"https://kitsu.io/api/edge",timeout:e.timeout||3e4})};o.prototype.fetch=function(t,r,i){return void 0===r&&(r={}),void 0===i&&(i={}),new Promise(function(s,c){var o=function(t){try{throw n(t)}catch(t){return c(t)}};try{var u,h,p,d;return u=(d=t.split("/"))[1],h=d[2],p=this.plural(this.resCase(d[0])),u&&(p+="/"+u),h&&(p+="/"+this.resCase(h)),this.axios.get(p,{params:r,paramsSerializer:function(t){return a(t)},headers:Object.assign(this.headers,i)}).then(function(t){try{return s(e(t.data))}catch(t){return o(t)}},o)}catch(t){o(t)}}.bind(this))},o.prototype.update=function(t,r,e){return void 0===e&&(e={}),new Promise(function(i,a){var c=function(t){try{throw n(t)}catch(t){return a(t)}};try{var o,u;return s.apply(this,[t,r,"PATCH"]).then(function(n){try{return o=n,u=this.plural(this.resCase(t))+"/"+r.id,this.axios.patch(u,o,{headers:Object.assign(this.headers,e)}).then(function(t){try{return i(t.data)}catch(t){return c(t)}},c)}catch(t){return c(t)}}.bind(this),c)}catch(t){c(t)}}.bind(this))},o.prototype.create=function(t,r,e){return void 0===e&&(e={}),new Promise(function(i,a){var c=function(t){try{throw n(t)}catch(t){return a(t)}};try{var o;return o=this.plural(this.resCase(t)),s.apply(this,[t,r]).then(function(t){try{return this.axios.post(o,t,{headers:Object.assign(this.headers,e)}).then(function(t){try{return i(t.data)}catch(t){return c(t)}},c)}catch(t){return c(t)}}.bind(this),c)}catch(t){c(t)}}.bind(this))},o.prototype.remove=function(t,r,e){return void 0===e&&(e={}),new Promise(function(i,a){var c=function(t){try{throw n(t)}catch(t){return a(t)}};try{var o;return o=this.plural(this.resCase(t))+"/"+r,s.apply(this,[t,{id:r},"DELETE"]).then(function(t){try{return this.axios.delete(o,{data:t,headers:Object.assign(this.headers,e)}).then(function(t){try{return i(t.data)}catch(t){return c(t)}},c)}catch(t){return c(t)}}.bind(this),c)}catch(t){c(t)}}.bind(this))},o.prototype.self=function(t,r){return void 0===t&&(t={}),void 0===r&&(r={}),new Promise(function(e,i){var a=function(t){try{throw n(t)}catch(t){return i(t)}};try{return this.fetch("users",Object.assign({filter:{self:!0}},t),r).then(function(t){try{return e(t.data[0])}catch(t){return a(t)}},a)}catch(t){a(t)}}.bind(this))};export default o;
//# sourceMappingURL=index.m.js.map
