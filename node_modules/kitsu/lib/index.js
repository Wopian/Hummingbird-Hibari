'use strict';function _interopDefault(a){return a&&'object'==typeof a&&'default'in a?a['default']:a}var _regeneratorRuntime=_interopDefault(require('babel-runtime/regenerator')),_slicedToArray=_interopDefault(require('babel-runtime/helpers/slicedToArray')),_asyncToGenerator=_interopDefault(require('babel-runtime/helpers/asyncToGenerator')),axios=_interopDefault(require('axios')),kitsuCore=require('kitsu-core');class Kitsu{constructor(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.fetch=this.get,this.update=this.patch,this.create=this.post,this.camel=!1===a.camelCaseTypes?a=>a:kitsuCore.camel,this.resCase='none'===a.resourceCase?a=>a:'snake'===a.resourceCase?kitsuCore.snake:kitsuCore.kebab,this.plural=!1===a.pluralize?a=>a:require('pluralize'),this.headers=Object.assign({},a.headers,{Accept:'application/vnd.api+json',"Content-Type":'application/vnd.api+json'}),this.axios=axios.create({baseURL:a.baseURL||'https://kitsu.io/api/edge',timeout:a.timeout||3e4})}get(a){var b=this,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return _asyncToGenerator(_regeneratorRuntime.mark(function e(){var f,g,h,i,j,k,l,m;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f=a.split('/'),g=_slicedToArray(f,3),h=g[0],i=g[1],j=g[2],k=b.plural(b.resCase(h)),i&&(k+=`/${i}`),j&&(k+=`/${b.resCase(j)}`),e.next=7,b.axios.get(k,{params:c,paramsSerializer:function(a){return kitsuCore.query(a)},headers:Object.assign(b.headers,d)});case 7:return l=e.sent,m=l.data,e.abrupt('return',kitsuCore.deserialise(m));case 12:throw e.prev=12,e.t0=e['catch'](0),kitsuCore.error(e.t0);case 15:case'end':return e.stop();}},e,b,[[0,12]])}))()}patch(a,b){var c=this,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return _asyncToGenerator(_regeneratorRuntime.mark(function e(){var f,g,h,i;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kitsuCore.serialise.apply(c,[a,b,'PATCH']);case 3:return f=e.sent,g=c.plural(c.resCase(a))+'/'+b.id,e.next=7,c.axios.patch(g,f,{headers:Object.assign(c.headers,d)});case 7:return h=e.sent,i=h.data,e.abrupt('return',i);case 12:throw e.prev=12,e.t0=e['catch'](0),kitsuCore.error(e.t0);case 15:case'end':return e.stop();}},e,c,[[0,12]])}))()}post(a,b){var c=this,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return _asyncToGenerator(_regeneratorRuntime.mark(function e(){var f,g,h;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f=c.plural(c.resCase(a)),e.t0=c.axios,e.t1=f,e.next=6,kitsuCore.serialise.apply(c,[a,b]);case 6:return e.t2=e.sent,e.t3={headers:Object.assign(c.headers,d)},e.next=10,e.t0.post.call(e.t0,e.t1,e.t2,e.t3);case 10:return g=e.sent,h=g.data,e.abrupt('return',h);case 15:throw e.prev=15,e.t4=e['catch'](0),kitsuCore.error(e.t4);case 18:case'end':return e.stop();}},e,c,[[0,15]])}))()}remove(a,b){var c=this,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return _asyncToGenerator(_regeneratorRuntime.mark(function e(){var f,g,h;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f=c.plural(c.resCase(a))+'/'+b,e.t0=c.axios,e.t1=f,e.next=6,kitsuCore.serialise.apply(c,[a,{id:b},'DELETE']);case 6:return e.t2=e.sent,e.t3=Object.assign(c.headers,d),e.t4={data:e.t2,headers:e.t3},e.next=11,e.t0.delete.call(e.t0,e.t1,e.t4);case 11:return g=e.sent,h=g.data,e.abrupt('return',h);case 16:throw e.prev=16,e.t5=e['catch'](0),kitsuCore.error(e.t5);case 19:case'end':return e.stop();}},e,c,[[0,16]])}))()}self(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return _asyncToGenerator(_regeneratorRuntime.mark(function d(){var e;return _regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,a.get('users',Object.assign({filter:{self:!0}},b),c);case 3:return e=d.sent,d.abrupt('return',e.data[0]);case 7:throw d.prev=7,d.t0=d['catch'](0),kitsuCore.error(d.t0);case 10:case'end':return d.stop();}},d,a,[[0,7]])}))()}}module.exports=Kitsu;
//# sourceMappingURL=index.js.map
